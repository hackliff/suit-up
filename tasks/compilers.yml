---
# TODO export N_PREFIX also
- name: download tj/n
  git: repo=https://github.com/tj/n dest={{ tmp_path }}/n
- name: install Node version management
  shell: PREFIX={{ dna_home }} make install
  args:
    chdir: "{{ tmp_path }}/n"

# https://github.com/yyuu/pyenv
- name: install pyenv and essential plugins
  shell: curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | PYENV_ROOT="{{ dna_lib_path }}/pyenv" bash

# https://github.com/sstephenson/rbenv
- name: install rbenv, ruby version manager
  git: >
    repo=https://github.com/sstephenson/rbenv
    dest={{ dna_lib_path }}/rbenv
    version=9e664b5d27cd7b2bdb94a9ec8ce55c32ebe1ad7a

# https://github.com/sstephenson/ruby-build
- name: install ruby-build
  git: >
    repo=https://github.com/sstephenson/ruby-build
    dest={{ dna_lib_path }}/rbenv/plugins/ruby-build
    version=8d6ff298006994334ac04b1efed098851c63cf4c

# https://github.com/moovweb/gvm
- stat: path={{ ansible_env.HOME }}/.gvm
  register: gvm_path
- name: install go version manager
  shell: curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer | bash
  when: not (gvm_path.stat.isdir is defined and gvm_path.stat.isdir)
