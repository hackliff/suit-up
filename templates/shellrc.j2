# --
# -- {{ ansible_managed }}
# --

# environment configuration
test -d {{ dna_bin_path }} && export PATH=$PATH:{{ dna_bin_path }}
test -d {{ consul_home }}/bin && export PATH=$PATH:{{ consul_home }}/bin

# third party utilities
[[ -f {{ dna_lib_path }}/k.sh ]] && source {{ dna_lib_path }}/k.sh
[[ -f {{ dna_lib_path }}/z.sh ]] && source {{ dna_lib_path }}/z.sh
[[ -f {{ dna_lib_path }}/autoenv/activate.sh ]] && source {{ dna_lib_path }}/autoenv/activate.sh

# NOTE Make it a function/alias ?
dstart() {
  local MACHINE_NAME="${1:-{{ docker_vm_name }}}"
  docker-machine start ${MACHINE_NAME} && eval "$(docker-machine env ${MACHINE_NAME})"
}

dhack () {
  local name=${1:-lab}
  local container="$(basename $PWD)_${name}_1"
  dstart
  docker-compose up -d
  docker exec -it ${container} bash
}
